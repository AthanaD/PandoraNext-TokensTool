"use strict";(self["webpackChunkPandoraNext_TokensTool"]=self["webpackChunkPandoraNext_TokensTool"]||[]).push([[941],{7941:function(e,a,o){o.r(a),o.d(a,{default:function(){return D}});var t=o(6773),l=(o(487),o(3164)),s=(o(6335),o(6252));const n=e=>((0,s.dD)("data-v-d7d7b018"),e=e(),(0,s.Cn)(),e),r={class:"content_login"},i=n((()=>(0,s._)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0,user-scalable=no"},null,-1))),d={class:"login-container"},c=["src"],m=n((()=>(0,s._)("h4",null,"Pandora-TokensTool",-1))),u={class:"container"},h={style:{display:"flex",transform:"translate(0vw, 2vh)","font-size":"14.6px"}},v={style:{display:"flex",transform:"translate(0vw, 2vh)","margin-top":"5vh","font-size":"14.6px"}},p={style:{display:"flex",transform:"translate(0.5vw, 0vh)","margin-top":"6vh"}},g={style:{display:"block",transform:"translate(0vw, 0vh)","margin-top":"3.5vh"}},k={class:"bottom"},f={style:{"text-align":"center",transform:"translateY(0vh)"}},w={key:0},_=n((()=>(0,s._)("h3",null,[(0,s.Uk)(" 获取token "),(0,s._)("a",{href:"https://chat.OpenAI.com/api/auth/session"},"官网地址 "),(0,s._)("a",{href:"https://ai.fakeopen.com/auth"},"Pandora地址"),(0,s.Uk)(" 欢迎大家来扩展 "),(0,s._)("a",{href:"https://github.com/Yanyutin753/PandoraNext-TokensTool"},"PandoraNext-TokensTool v0.5.8 ")],-1))),b=[_],y={key:1},T=n((()=>(0,s._)("br",null,null,-1))),x=n((()=>(0,s._)("h3",null,[(0,s.Uk)(" 获取token "),(0,s._)("a",{href:"https://chat.OpenAI.com/api/auth/session"},"官网地址 "),(0,s._)("a",{href:"https://ai.fakeopen.com/auth"},"Pandora地址"),(0,s._)("br"),(0,s.Uk)(" 欢迎大家来扩展 "),(0,s._)("a",{href:"https://github.com/Yanyutin753/PandoraNext-TokensTool"},"PandoraNext-TokensTool v0.5.8 ")],-1))),I=[T,x];function P(e,a,o,n,_,T){const x=l.gN,P=(0,s.up)("h9"),S=t.XZ;return(0,s.wg)(),(0,s.iD)("div",r,[i,(0,s._)("div",d,[(0,s._)("img",{src:n.image,alt:"Your Image","size:30":""},null,8,c),m]),(0,s._)("div",u,[(0,s._)("div",h,[(0,s.Wm)(x,{modelValue:n.username,"onUpdate:modelValue":a[0]||(a[0]=e=>n.username=e),name:"用户名",label:"用户名",placeholder:"用户名",class:"userName",rules:[{validator:e.customValidator}]},null,8,["modelValue","rules"])]),(0,s._)("div",v,[(0,s.Wm)(x,{modelValue:n.password,"onUpdate:modelValue":a[1]||(a[1]=e=>n.password=e),type:"password",name:"密码",label:"密码",placeholder:"密码",class:"userName",rules:[{validator:e.customValidator}]},null,8,["modelValue","rules"])]),(0,s._)("div",p,[(0,s.Wm)(S,{class:"remember",modelValue:n.checked,"onUpdate:modelValue":a[2]||(a[2]=e=>n.checked=e),"checked-color":"#0ea27e","icon-size":"13.5px"},{default:(0,s.w5)((()=>[(0,s.Wm)(P,{style:{"font-size":"13.5px",transform:"translateX(7px)"}},{default:(0,s.w5)((()=>[(0,s.Uk)("记住密码")])),_:1})])),_:1},8,["modelValue"])]),(0,s._)("div",g,[(0,s._)("input",{type:"submit",onClick:a[3]||(a[3]=(...e)=>n.submit&&n.submit(...e)),value:"登录",class:"userName"})])]),(0,s._)("div",k,[(0,s._)("div",f,[0==n.page?((0,s.wg)(),(0,s.iD)("div",w,b)):((0,s.wg)(),(0,s.iD)("div",y,I))])])])}var S=o(2262),U=o(2201),z=o(6154),N=o(451),V=o(1348),W={setup(){const e=(0,U.tv)(),a=(0,S.iH)(""),o=(0,S.iH)(""),t=(0,S.iH)(""),l=N,n=(0,S.iH)(!0);(0,s.bv)((()=>{const e=localStorage.getItem("savedUsername"),l=localStorage.getItem("savedPassword"),s=localStorage.getItem("savedRemember");"true"===s&&(a.value=e||"",o.value=l||"",t.value=!0),window.innerWidth>767&&(n.value=!1),i()}));const r=localStorage.getItem("jwtToken"),i=async()=>{z.Z.post("/api/loginToken?token="+r).then((a=>{1!=a.data.code?(V.z8.error("令牌失效，请重新登录！"),console.log(a.data.data)):window.innerWidth<=1e3?e.replace("/iphone"):e.replace("/home")})).catch((e=>{V.z8.error("令牌失效，请重新登录！")}))},d=()=>{t.value?(localStorage.setItem("savedUsername",a.value),localStorage.setItem("savedPassword",o.value),localStorage.setItem("savedRemember","true")):(localStorage.removeItem("savedUsername"),localStorage.removeItem("savedPassword"),localStorage.removeItem("savedRemember"));let l={loginUsername:a.value,loginPassword:o.value};fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify(l)}).then((e=>e.json())).then((a=>{if(1===a.code){console.log("登录成功");const o=a.data;localStorage.setItem("jwtToken",o),V.z8.success("登录成功！"),setTimeout((()=>{window.innerWidth<=1e3?e.replace("/iphone"):e.replace("/home")}),1e3)}else V.z8.error(a.msg)})).catch((e=>{console.error("登录时出现错误:",e),V.z8.error("账号或密码错误！")}))};return{username:a,password:o,image:l,checked:t,submit:d,page:n}}},C=o(3744);const j=(0,C.Z)(W,[["render",P],["__scopeId","data-v-d7d7b018"]]);var D=j}}]);
//# sourceMappingURL=941.3a0e1603.js.map