"use strict";(self["webpackChunkPandoraNext_TokensTool"]=self["webpackChunkPandoraNext_TokensTool"]||[]).push([[608],{4476:function(e,a,t){t.r(a),t.d(a,{default:function(){return S}});var o=t(6773),l=(t(487),t(3164)),s=(t(6335),t(6252));const n=e=>((0,s.dD)("data-v-b90dbbf6"),e=e(),(0,s.Cn)(),e),r={class:"content_login"},i=n((()=>(0,s._)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0,user-scalable=no"},null,-1))),d=n((()=>(0,s._)("div",{class:"login-container"},[(0,s._)("h4",null,"PandoraNext-TokensTool")],-1))),m={class:"container"},c={style:{display:"flex",transform:"translate(0vw, 2vh)","font-size":"14.6px"}},u={style:{display:"flex",transform:"translate(0vw, 2vh)","margin-top":"5vh","font-size":"14.6px"}},v={style:{display:"flex",transform:"translate(0.5vw, 0vh)","margin-top":"6vh"}},p={style:{display:"block",transform:"translate(0vw, 0vh)","margin-top":"3.5vh"}},h=n((()=>(0,s._)("div",{class:"bottom"},[(0,s._)("div",{style:{"text-align":"center",transform:"translateY(0vh)"}},[(0,s._)("h3",null,[(0,s._)("a",{href:"https://github.com/Yanyutin753/PandoraNext-TokensTool"},"Powered by tokensTool v0.6.3")])])],-1)));function g(e,a,t,n,g,w){const b=l.gN,f=(0,s.up)("h9"),k=o.XZ;return(0,s.wg)(),(0,s.iD)("div",r,[i,d,(0,s._)("div",m,[(0,s._)("div",c,[(0,s.Wm)(b,{modelValue:n.username,"onUpdate:modelValue":a[0]||(a[0]=e=>n.username=e),clearable:"",name:"username",label:"Username",placeholder:"username",class:"userName","input-align":"center",rules:[{validator:e.customValidator}]},null,8,["modelValue","rules"])]),(0,s._)("div",u,[(0,s.Wm)(b,{modelValue:n.password,"onUpdate:modelValue":a[1]||(a[1]=e=>n.password=e),clearable:"",type:"password",name:"password",label:"Password",placeholder:"password",class:"userName","input-align":"center",rules:[{validator:e.customValidator}]},null,8,["modelValue","rules"])]),(0,s._)("div",v,[(0,s.Wm)(k,{class:"remember",modelValue:n.checked,"onUpdate:modelValue":a[2]||(a[2]=e=>n.checked=e),"checked-color":"#0ea27e","icon-size":"13.5px"},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{style:{"font-size":"13.5px",transform:"translateX(7px)"}},{default:(0,s.w5)((()=>[(0,s.Uk)("Remember me")])),_:1})])),_:1},8,["modelValue"])]),(0,s._)("div",p,[(0,s._)("input",{type:"submit",onClick:a[3]||(a[3]=(...e)=>n.submit&&n.submit(...e)),value:"Continue",class:"userName"})])]),h])}var w=t(2262),b=t(2201),f=t(6154),k=t.p+"img/chatGpt.93292c55.jpg",_=t(1348),y={setup(){const e=(0,b.tv)(),a=window.location.pathname,t=a.split("/");let o="";t.length>=3&&(o="/"+t[1]);const l=(0,w.iH)(""),n=(0,w.iH)(""),r=(0,w.iH)(""),i=k,d=(0,w.iH)(!0);(0,s.bv)((async()=>{const e=localStorage.getItem("savedUsername"),a=localStorage.getItem("savedPassword"),t=localStorage.getItem("savedRemember");"true"===t&&(l.value=e||"",n.value=a||"",r.value=!0),window.innerWidth>767&&(d.value=!1),c()}));const m=localStorage.getItem("jwtToken"),c=async()=>{f.Z.post(`${o}/api/loginToken?token=`+m).then((a=>{1!=a.data.code?_.z8.error("令牌失效，请重新登录！"):window.innerWidth<=1e3?e.replace("/iphone"):e.replace("/home")})).catch((e=>{_.z8.error("令牌失效，请重新登录！")}))},u=()=>{r.value?(localStorage.setItem("savedUsername",l.value),localStorage.setItem("savedPassword",n.value),localStorage.setItem("savedRemember","true")):(localStorage.removeItem("savedUsername"),localStorage.removeItem("savedPassword"),localStorage.removeItem("savedRemember"));let a={loginUsername:l.value,loginPassword:n.value};fetch(`${o}/api/login`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(a)}).then((e=>e.json())).then((a=>{if(1===a.code){const t=a.data;localStorage.setItem("jwtToken",t),_.z8.success("登录成功！"),setTimeout((()=>{window.innerWidth<=1e3?e.replace("/iphone"):e.replace("/home")}),1e3)}else _.z8.error(a.msg)})).catch((e=>{console.error("登录时出现错误:",e),_.z8.error("账号或密码错误！")}))};return{username:l,password:n,image:i,checked:r,submit:u,page:d}}},T=t(3744);const x=(0,T.Z)(y,[["render",g],["__scopeId","data-v-b90dbbf6"]]);var S=x}}]);
//# sourceMappingURL=608.2335e494.js.map