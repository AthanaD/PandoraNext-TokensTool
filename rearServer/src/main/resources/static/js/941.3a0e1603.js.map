{"version":3,"file":"js/941.3a0e1603.js","mappings":"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","sources":["webpack://PandoraNext-TokensTool/./src/views/loginIndex.vue?a33d","webpack://PandoraNext-TokensTool/./src/views/loginIndex.vue","webpack://PandoraNext-TokensTool/./src/views/loginIndex.vue?41fe"],"sourcesContent":["import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-d7d7b018\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"content_login\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"meta\", {\n  name: \"viewport\",\n  content: \"width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0,user-scalable=no\"\n}, null, -1));\nconst _hoisted_3 = {\n  class: \"login-container\"\n};\nconst _hoisted_4 = [\"src\"];\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h4\", null, \"Pandora-TokensTool\", -1));\nconst _hoisted_6 = {\n  class: \"container\"\n};\nconst _hoisted_7 = {\n  style: {\n    \"display\": \"flex\",\n    \"transform\": \"translate(0vw, 2vh)\",\n    \"font-size\": \"14.6px\"\n  }\n};\nconst _hoisted_8 = {\n  style: {\n    \"display\": \"flex\",\n    \"transform\": \"translate(0vw, 2vh)\",\n    \"margin-top\": \"5vh\",\n    \"font-size\": \"14.6px\"\n  }\n};\nconst _hoisted_9 = {\n  style: {\n    \"display\": \"flex\",\n    \"transform\": \"translate(0.5vw, 0vh)\",\n    \"margin-top\": \"6vh\"\n  }\n};\nconst _hoisted_10 = {\n  style: {\n    \"display\": \"block\",\n    \"transform\": \"translate(0vw, 0vh)\",\n    \"margin-top\": \"3.5vh\"\n  }\n};\nconst _hoisted_11 = {\n  class: \"bottom\"\n};\nconst _hoisted_12 = {\n  style: {\n    \"text-align\": \"center\",\n    \"transform\": \"translateY(0vh)\"\n  }\n};\nconst _hoisted_13 = {\n  key: 0\n};\nconst _hoisted_14 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h3\", null, [/*#__PURE__*/_createTextVNode(\" 获取token \"), /*#__PURE__*/_createElementVNode(\"a\", {\n  href: \"https://chat.OpenAI.com/api/auth/session\"\n}, \"官网地址 \"), /*#__PURE__*/_createElementVNode(\"a\", {\n  href: \"https://ai.fakeopen.com/auth\"\n}, \"Pandora地址\"), /*#__PURE__*/_createTextVNode(\" 欢迎大家来扩展 \"), /*#__PURE__*/_createElementVNode(\"a\", {\n  href: \"https://github.com/Yanyutin753/PandoraNext-TokensTool\"\n}, \"PandoraNext-TokensTool v0.5.8 \")], -1));\nconst _hoisted_15 = [_hoisted_14];\nconst _hoisted_16 = {\n  key: 1\n};\nconst _hoisted_17 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_18 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h3\", null, [/*#__PURE__*/_createTextVNode(\" 获取token \"), /*#__PURE__*/_createElementVNode(\"a\", {\n  href: \"https://chat.OpenAI.com/api/auth/session\"\n}, \"官网地址 \"), /*#__PURE__*/_createElementVNode(\"a\", {\n  href: \"https://ai.fakeopen.com/auth\"\n}, \"Pandora地址\"), /*#__PURE__*/_createElementVNode(\"br\"), /*#__PURE__*/_createTextVNode(\" 欢迎大家来扩展 \"), /*#__PURE__*/_createElementVNode(\"a\", {\n  href: \"https://github.com/Yanyutin753/PandoraNext-TokensTool\"\n}, \"PandoraNext-TokensTool v0.5.8 \")], -1));\nconst _hoisted_19 = [_hoisted_17, _hoisted_18];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_van_field = _resolveComponent(\"van-field\");\n  const _component_h9 = _resolveComponent(\"h9\");\n  const _component_van_checkbox = _resolveComponent(\"van-checkbox\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"img\", {\n    src: $setup.image,\n    alt: \"Your Image\",\n    \"size:30\": \"\"\n  }, null, 8, _hoisted_4), _hoisted_5]), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [_createVNode(_component_van_field, {\n    modelValue: $setup.username,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.username = $event),\n    name: \"用户名\",\n    label: \"用户名\",\n    placeholder: \"用户名\",\n    class: \"userName\",\n    rules: [{\n      validator: _ctx.customValidator\n    }]\n  }, null, 8, [\"modelValue\", \"rules\"])]), _createElementVNode(\"div\", _hoisted_8, [_createVNode(_component_van_field, {\n    modelValue: $setup.password,\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.password = $event),\n    type: \"password\",\n    name: \"密码\",\n    label: \"密码\",\n    placeholder: \"密码\",\n    class: \"userName\",\n    rules: [{\n      validator: _ctx.customValidator\n    }]\n  }, null, 8, [\"modelValue\", \"rules\"])]), _createElementVNode(\"div\", _hoisted_9, [_createVNode(_component_van_checkbox, {\n    class: \"remember\",\n    modelValue: $setup.checked,\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.checked = $event),\n    \"checked-color\": \"#0ea27e\",\n    \"icon-size\": \"13.5px\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_h9, {\n      style: {\n        \"font-size\": \"13.5px\",\n        \"transform\": \"translateX(7px)\"\n      }\n    }, {\n      default: _withCtx(() => [_createTextVNode(\"记住密码\")]),\n      _: 1\n    })]),\n    _: 1\n  }, 8, [\"modelValue\"])]), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"input\", {\n    type: \"submit\",\n    onClick: _cache[3] || (_cache[3] = (...args) => $setup.submit && $setup.submit(...args)),\n    value: \"登录\",\n    class: \"userName\"\n  })])]), _createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"div\", _hoisted_12, [$setup.page == false ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, _hoisted_15)) : (_openBlock(), _createElementBlock(\"div\", _hoisted_16, _hoisted_19))])])]);\n}","import { ref, onMounted } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport axios from \"axios\";\nimport png from \"../asserts/chatGpt.jpg\";\nimport { ElMessage } from \"element-plus\";\nexport default {\n  setup() {\n    const router = useRouter();\n    const username = ref(\"\");\n    const password = ref(\"\");\n    const checked = ref(\"\");\n    const image = png;\n    const page = ref(true);\n    onMounted(() => {\n      const savedUsername = localStorage.getItem(\"savedUsername\");\n      const savedPassword = localStorage.getItem(\"savedPassword\");\n      const savedRemember = localStorage.getItem(\"savedRemember\");\n      if (savedRemember === \"true\") {\n        username.value = savedUsername || \"\";\n        password.value = savedPassword || \"\";\n        checked.value = true;\n      }\n      if (window.innerWidth > 767) {\n        page.value = false;\n      }\n      fetchLoginToken();\n    });\n\n    // 自定义校验函数，直接返回错误提示\n    const customValidator = value => {\n      // 不允许有空格和回车符\n      const regex = /^(?!.*[\\s\\r\\n]).*$/;\n      if (regex.test(value)) {\n        return true;\n      } else {\n        return \"此项不允许包含空格和回车符\";\n      }\n    };\n\n    /**\r\n     * 用jwt令牌验证身份\r\n     * 未通过者返回到/login\r\n     */\n    const token = localStorage.getItem(\"jwtToken\"); // 从localStorage获取JWT令牌\n    const headers = {\n      Authorization: `Bearer ${token}`\n    };\n    /**\r\n     * 用jwt令牌验证身份函数\r\n     */\n    const fetchLoginToken = async () => {\n      axios.post(\"/api/loginToken?token=\" + token).then(response => {\n        if (response.data.code == 1) {\n          if (window.innerWidth <= 1000) {\n            router.replace(\"/iphone\");\n          } else {\n            router.replace(\"/home\");\n          }\n          return;\n        } else {\n          ElMessage.error(\"令牌失效，请重新登录！\");\n        }\n        console.log(response.data.data);\n      }).catch(error => {\n        ElMessage.error(\"令牌失效，请重新登录！\");\n      });\n    };\n    const submit = () => {\n      // 处理登录逻辑\n      if (checked.value) {\n        // 如果记住密码被选中，将用户名和密码保存到本地存储\n        localStorage.setItem(\"savedUsername\", username.value);\n        localStorage.setItem(\"savedPassword\", password.value);\n        localStorage.setItem(\"savedRemember\", \"true\");\n      } else {\n        // 如果不记住密码，清除本地存储中的信息\n        localStorage.removeItem(\"savedUsername\");\n        localStorage.removeItem(\"savedPassword\");\n        localStorage.removeItem(\"savedRemember\");\n      }\n      let setting = {\n        loginUsername: username.value,\n        loginPassword: password.value\n      };\n      fetch(\"/api/login\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${setting}`\n        },\n        body: JSON.stringify(setting)\n      }).then(response => response.json()).then(data => {\n        if (data.code === 1) {\n          // 修改此行，使用严格相等运算符\n          console.log(\"登录成功\");\n          const token = data.data;\n          localStorage.setItem(\"jwtToken\", token);\n          ElMessage.success(\"登录成功！\");\n          setTimeout(() => {\n            if (window.innerWidth <= 1000) {\n              router.replace(\"/iphone\");\n            } else {\n              router.replace(\"/home\");\n            }\n          }, 1000);\n        } else {\n          ElMessage.error(data.msg);\n        }\n      }).catch(error => {\n        console.error(\"登录时出现错误:\", error);\n        ElMessage.error(\"账号或密码错误！\");\n      });\n    };\n    return {\n      username,\n      password,\n      image,\n      checked,\n      submit,\n      page\n    };\n  }\n};","/* unplugin-vue-components disabled */import { render } from \"./loginIndex.vue?vue&type=template&id=d7d7b018&scoped=true\"\nimport script from \"./loginIndex.vue?vue&type=script&lang=js\"\nexport * from \"./loginIndex.vue?vue&type=script&lang=js\"\n\nimport \"./loginIndex.vue?vue&type=style&index=0&id=d7d7b018&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-d7d7b018\"]])\n\nexport default __exports__"],"names":["_withScopeId","n","_hoisted_1","class","_hoisted_2","_","name","content","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","style","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","key","_hoisted_14","href","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","render","_ctx","_cache","$props","$setup","$data","$options","_component_van_field","_component_h9","_component_van_checkbox","src","image","alt","modelValue","username","$event","label","placeholder","rules","validator","customValidator","password","type","checked","default","onClick","args","submit","value","page","setup","router","savedUsername","localStorage","getItem","savedPassword","savedRemember","window","innerWidth","fetchLoginToken","token","async","axios","post","then","response","data","code","error","console","log","replace","catch","setItem","removeItem","setting","loginUsername","loginPassword","fetch","method","headers","Authorization","body","JSON","stringify","json","success","setTimeout","msg","__exports__"],"sourceRoot":""}